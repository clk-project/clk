:PROPERTIES:
:ID:       0ecfb0d2-433b-4b34-8a4a-529603d8e669
:END:
#+language: en
#+EXPORT_FILE_NAME: ./lib.md
#+SUBTITLE: Reference for clk.lib Python helpers (download, echo_json, etc.)

#+BEGIN_SRC elisp :exports none :results none
  (org-gfm-export-to-markdown)
#+END_SRC

There are several stuff that you will always need to have at hand when
developing command line commands.

* Getting files
  :PROPERTIES:
  :CUSTOM_ID: 780a9f7a-801f-4f4b-83ef-7bfffdf71372
  :END:

Often, files are available as zip of tar archives in web servers. A function
that, given a url, would download and extract its content would be very useful.

#+name:extract
#+BEGIN_SRC python :results verbatim :exports both :session
    from pathlib import Path

    from clk.lib import extract

    f = Path("readme")

    assert not f.exists()
    extract("https://github.com/clk-project/clk/raw/main/tests/zipfile.zip")
    assert f.exists()
    assert f.read_text() == "hello from some zip file\n"
#+END_SRC

If you wish to simply download the file, just call download. See
[[file:fetching_and_displaying_json_data.org][fetching and displaying JSON data]] for a complete example of using ~download~.

* Tangling                                                         :noexport:
  :PROPERTIES:
  :CUSTOM_ID: 4deb6976-5708-4527-8ed8-c2ab9de8cc38
  :END:
#+BEGIN_SRC python :tangle ../../tests/use_cases/../test_lib2.py :exports none  :noweb yes :shebang "#!/usr/bin/env python3"

# Automatically generated, don't edit


def test_extract():
    <<extract>>



#+END_SRC
